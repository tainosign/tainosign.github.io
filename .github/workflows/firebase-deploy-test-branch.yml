name: Firebase Hosting è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ (testãƒ–ãƒ©ãƒ³ãƒ)

on:
  push:
    branches:
      - test

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - name: ğŸš€ ã‚³ãƒ¼ãƒ‰ã®ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
        uses: actions/checkout@v4

      - name: ğŸ’» Node.jsã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: ğŸ“¦ ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨ãƒ“ãƒ«ãƒ‰
        working-directory: vue-test
        run: |
          rm -rf node_modules dist
          npm ci
          npm run build

      - name: ğŸ“‚ distãƒ•ã‚©ãƒ«ãƒ€ã‚’ç¢ºèª
        run: ls -R vue-test/dist

      - name: ğŸ”¥ Firebase Hostingã¸ãƒ‡ãƒ—ãƒ­ã‚¤
        uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          firebaseServiceAccount: ${{ secrets.FIREBASE_SERVICE_ACCOUNT_SETAPANMARKETCOUNTER }}
          channelId: live
          projectId: setapanmarketcounter
