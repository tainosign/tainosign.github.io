# .github/workflows/firebase-deploy.yml

name: Firebase Hosting 自動デプロイ (本番環境)

on:
  push:
    # mainブランチへのプッシュをトリガーとします
    branches:
      - test 

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
      - name: 🚀 コードのチェックアウト
        uses: actions/checkout@v4

     # - name: 💻 Node.jsのセットアップ
      #  uses: actions/setup-node@v4
     #   with:
        #  node-version: '20'

     # - name: 📦 依存関係のインストール
    #  run: npm install
        
      # 🔥 ここがFirebaseデプロイの重要なステップです
      - name: 🔥 Firebase Hostingへデプロイ
        uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          # GitHub Secretsに登録済みのトークンを使用
          firebaseServiceAccount: ${{ secrets.FIREBASE_TOKEN }}
          # デプロイチャネル（本番環境）
          channelId: live
          # プロジェクトID (未指定の場合は .firebaserc から自動検出)
          # projectId: [ここにプロジェクトIDを記入しても良い]
